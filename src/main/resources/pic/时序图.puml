@startuml
actor 用户

participant 游戏界面
participant 游戏控制器
participant 游戏逻辑

User -> 游戏界面: 打开游戏
activate 游戏界面
游戏界面 -> 游戏控制器: 加载地图和机器人位置
activate 游戏控制器
游戏控制器 -> 游戏逻辑: 初始化游戏状态
activate 游戏逻辑
游戏逻辑 --> 游戏控制器: 游戏状态初始化完成
游戏控制器 --> 游戏界面: 游戏状态初始化完成
deactivate 游戏逻辑
游戏控制器 --> 游戏界面: 显示初始地图和机器人位置
游戏界面 --> User: 显示初始地图和机器人位置

User -> 游戏界面: 点击编辑指令按钮
游戏界面 -> 游戏控制器: 进入指令编辑界面
游戏控制器 --> 游戏界面: 指令编辑界面

User -> 游戏界面: 选择指令
游戏界面 -> 游戏控制器: 添加指令
游戏控制器 --> 游戏界面: 指令添加成功

User -> 游戏界面: 继续选择和添加指令
游戏界面 -> 游戏控制器: 请求继续选择和添加指令
游戏控制器 --> 游戏界面: 允许继续选择和添加指令
loop
    User -> 游戏界面: 选择指令
    游戏界面 -> 游戏控制器: 添加指令
    游戏控制器 --> 游戏界面: 指令添加成功
    User -> 游戏界面: 继续选择和添加指令？
    游戏界面 --> User: 是否继续选择和添加指令？
end
游戏界面 -> 游戏控制器: 完成指令编辑
游戏控制器 --> 游戏界面: 指令编辑完成

User -> 游戏界面: 点击启动按钮
游戏界面 -> 游戏控制器: 启动游戏
游戏控制器 --> 游戏逻辑: 开始执行指令序列
activate 游戏逻辑
游戏逻辑 --> 游戏控制器: 指令执行结果
deactivate 游戏逻辑
游戏控制器 -->游戏界面: 更新游戏状态
游戏界面 --> User: 显示游戏状态更新

User -> 游戏界面: 退出游戏
游戏界面 -> 游戏控制器: 游戏退出
游戏控制器 --> 游戏逻辑: 游戏退出
activate 游戏逻辑
游戏逻辑 --> 游戏控制器: 清理游戏状态
游戏逻辑 --> 游戏控制器: 游戏退出成功
deactivate 游戏逻辑
游戏控制器 --> 游戏界面: 游戏退出成功
游戏界面 --> User: 游戏退出成功

deactivate 游戏控制器
deactivate 游戏界面
@enduml
